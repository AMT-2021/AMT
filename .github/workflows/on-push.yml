name: Code validation
on: push
jobs:
  Lint:
    runs-on: ubuntu-latest
    steps:
      - uses: actions/checkout@v2
      - run: |
          echo "I should be running the linter here, but I don't know how to \
          do so yet."
  Build:
    runs-on: ubuntu-latest
    steps:
      - uses: actions/checkout@v2
      - run: |
          echo "I should be building the project here, but I do not know how \
          to build it yet."
          date > build-datetime.txt
          echo "I stored the build date time in a text file."
      - name: Upload build artifacts
        uses: actions/upload-artifact@v2
        with:
          name: build-datetime
          path: build-datetime.txt
  unit-test:
    name: Unit tests
    runs-on: ubuntu-latest
    needs: Build
    steps:
      - uses: actions/checkout@v2
      - name: Download build artifacts
        uses: actions/download-artifact@v2
        with:
          name: build-datetime
      - run: |
          echo "I should be running the project unit tests here. But they have \
          not been implemented yet. Note that I should not build them since \
          they should have already been built in the “build” stage."
          echo "Using build artifacts from $(cat build-datetime.txt)."
  Package:
    runs-on: ubuntu-latest
    needs: Build
    steps:
      - uses: actions/checkout@v2
      - name: Download build artifacts
        uses: actions/download-artifact@v2
        with:
          name: build-datetime
      - run: |
          echo "I would be packaging the application in a format suitable for \
          deployment but this is not yet implemented. Note that I should not \
          build them since they should have already been built in the “build” \
          stage."
          echo "Using build artifacts from $(cat build-datetime.txt)."
          cp build-datetime.txt package-artifact.txt
      - name: Upload package artifacts
        uses: actions/upload-artifact@v2
        with:
          name: package-artifact
          path: package-artifact.txt
  integration-tests:
    name: Integration tests
    runs-on: ubuntu-latest
    needs: Package
    steps:
      - name: Download package artifacts
        uses: actions/download-artifact@v2
        with:
          path: package-artifact
      - run: |
          echo "I would be running integration tests on the release package \
          but this is not yet implemented. Note that I should not require \
          access to the code, but all my inputs should be artifacts."
          echo "Using package artifact $(cat package-artifact.txt)."
